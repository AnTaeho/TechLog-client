(function(){"use strict";var t={2295:function(t,e,s){var a=s(5130),o=s(6768),n=s(4232);const r={id:"app"},i={key:0},l={class:"user-name"},c={key:1};function u(t,e,s,a,u,d){const p=(0,o.g2)("router-link"),h=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("nav",null,[(0,o.Lk)("div",{class:"logo",onClick:e[0]||(e[0]=(...t)=>d.goHome&&d.goHome(...t))},"Tech Log"),d.isLoggedIn?((0,o.uX)(),(0,o.CE)("div",i,[(0,o.Lk)("span",l,(0,n.v_)(u.name),1),(0,o.bF)(p,{to:"/write",class:"write-button"},{default:(0,o.k6)((()=>[(0,o.eW)("글쓰기")])),_:1}),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>d.logout&&d.logout(...t)),class:"logout-button"},"로그아웃")])):((0,o.uX)(),(0,o.CE)("div",c,[(0,o.bF)(p,{to:"/login"},{default:(0,o.k6)((()=>[(0,o.eW)("로그인")])),_:1})]))]),(0,o.bF)(h,{onLoginSuccess:d.handleLoginSuccess},null,8,["onLoginSuccess"])])}s(4114);var d=s(4373);const p=d.A.create({baseURL:"http://13.209.59.18:8081",timeout:1e4});let h=!1,m=[];const k=(t,e=null)=>{m.forEach((s=>{t?s.reject(t):s.resolve(e)})),m=[]};p.interceptors.request.use((t=>{const e=localStorage.getItem("accessToken"),s=[/^\/users\/.*/,/^\/posts\/\d+$/,/^\/error\/.*/,/^\/$/];return s.some((e=>e.test(t.url)))||e&&(t.headers.Authorization=`Bearer ${e}`),t}),(t=>Promise.reject(t))),p.interceptors.response.use((t=>t),(async t=>{const e=t.config;if(t.response&&401===t.response.status&&!e._retry){if(!h){e._retry=!0,h=!0;const t=localStorage.getItem("refreshToken");try{const s=await d.A.post(`http://localhost:8081/users/reissue?refreshToken=${t}`),{accessToken:a,refreshToken:o,userId:n}=s.data.result;return localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",o),n&&localStorage.setItem("userId",n),k(null,a),e.headers.Authorization=`Bearer ${a}`,p(e)}catch(s){return k(s,null),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userId"),window.location.href="/",Promise.reject(s)}finally{h=!1}}return new Promise(((t,e)=>{m.push({resolve:t,reject:e})})).then((t=>(e.headers.Authorization=`Bearer ${t}`,p(e)))).catch((t=>(console.error("Request retry failed:",t),Promise.reject(t))))}return t.response&&401===t.response.status&&console.error("Unauthorized:",t.response.data.error.message),Promise.reject(t)}));var v=p,f={name:"App",data(){return{name:"",userId:0}},computed:{isLoggedIn(){return!!localStorage.getItem("accessToken")}},created(){this.isLoggedIn&&(this.name=localStorage.getItem("name"),this.userId=localStorage.getItem("userId"))},methods:{handleLoginSuccess(t){const{name:e,accessToken:s,refreshToken:a,userId:o}=t;console.log("Login Data:",t),o?(localStorage.setItem("accessToken",s),localStorage.setItem("refreshToken",a),localStorage.setItem("name",e),localStorage.setItem("userId",o),this.name=e,this.userId=o,this.$router.push("/"),window.location.reload()):console.error("userId is missing in login response.")},async logout(){try{await v.post("/users/logout",{},{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("name"),localStorage.removeItem("userId"),this.name="",this.userId=null,this.$router.push("/"),window.location.reload()}catch(t){console.error("로그아웃 중 오류가 발생했습니다:",t)}},goHome(){window.location.href="/"}}},b=s(1241);const L=(0,b.A)(f,[["render",u]]);var y=L,T=s(1387);const I=t=>((0,o.Qi)("data-v-627fa2ff"),t=t(),(0,o.jt)(),t),w={class:"main-page"},P={key:0,class:"sidebar"},C={class:"tag-list"},$=["onClick"],S=I((()=>(0,o.Lk)("h1",null,"게시판",-1))),_={class:"pagination"},E=["disabled"],U=["disabled"];function x(t,e,s,a,r,i){const l=(0,o.g2)("PostList");return(0,o.uX)(),(0,o.CE)("div",w,[r.accessToken?((0,o.uX)(),(0,o.CE)("div",P,[(0,o.Lk)("ul",C,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.tags,(t=>((0,o.uX)(),(0,o.CE)("li",{key:t,class:(0,n.C4)({"tag-item":!0,selected:r.selectedTag===t}),onClick:e=>i.toggleTag(t)},(0,n.v_)(t),11,$)))),128))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",{class:(0,n.C4)({content:!0,"full-width":!r.accessToken})},[S,(0,o.bF)(l,{posts:r.posts},null,8,["posts"]),(0,o.Lk)("div",_,[(0,o.Lk)("button",{onClick:e[0]||(e[0]=(...t)=>i.prevPage&&i.prevPage(...t)),disabled:0===r.currentPage},"이전",8,E),(0,o.Lk)("span",null,(0,n.v_)(r.currentPage+1)+" / "+(0,n.v_)(r.totalPages),1),(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.nextPage&&i.nextPage(...t)),disabled:r.currentPage>=r.totalPages-1},"다음",8,U)])],2)])}const D={class:"post-list"},j=["onClick"],A=["src"],X={class:"post-content"},F={class:"post-meta"},M={class:"tags"},z={class:"date-author"};function J(t,e,s,a,r,i){return(0,o.uX)(),(0,o.CE)("div",D,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.posts,(t=>((0,o.uX)(),(0,o.CE)("div",{key:t.postId,class:"post-card",onClick:e=>i.goToPostDetail(t.postId)},[(0,o.Lk)("img",{src:i.getThumbnail(t.thumbnail),alt:"Post Thumbnail",class:"post-thumbnail"},null,8,A),(0,o.Lk)("div",X,[(0,o.Lk)("h2",null,(0,n.v_)(t.title),1),(0,o.Lk)("div",F,[(0,o.Lk)("div",M,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.tags,(t=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"tag-item"},(0,n.v_)(t),1)))),128))]),(0,o.Lk)("div",z,[(0,o.Lk)("span",null,(0,n.v_)(t.createdAt),1),(0,o.eW)(" · "),(0,o.Lk)("span",null,(0,n.v_)(t.writer),1)])])])],8,j)))),128))])}var O=s(3153),Q={props:{posts:{type:Array,required:!0}},methods:{getThumbnail(t){if(!t||t.startsWith("s3://")){const e=t?t.replace("s3://tech-blog-image/",""):"";return e?`https://tech-blog-image.s3.amazonaws.com/${e}`:O}return t},goToPostDetail(t){t?this.$router.push({name:"PostDetail",params:{postId:t}}):console.error("postId가 없습니다!")}}};const V=(0,b.A)(Q,[["render",J],["__scopeId","data-v-bbf3ed52"]]);var q=V,H={name:"MainPage",components:{PostList:q},data(){return{posts:[],tags:[],currentPage:0,totalPages:0,pageSize:20,accessToken:"",selectedTag:""}},mounted(){this.accessToken=localStorage.getItem("accessToken")||"",this.currentPage=parseInt(this.$route.query.page)||0,this.accessToken&&this.fetchTags(),this.fetchPosts()},methods:{async fetchTags(){try{const t=await this.$axios.get("/tags",{headers:{Authorization:`Bearer ${this.accessToken}`}});this.tags=t.data.result.tags}catch(t){console.error("태그를 가져오는 중 오류 발생:",t)}},async fetchPosts(){try{const t=await this.$axios.get("/posts",{params:{page:this.currentPage,size:this.pageSize}});this.posts=t.data.result.posts,this.totalPages=t.data.page.totalPages}catch(t){console.error("게시글을 가져오는 중 오류 발생:",t)}},async fetchPostsByTag(t){try{const e=await this.$axios.get("/posts/tag",{params:{page:this.currentPage,size:this.pageSize,tag:t}});this.posts=e.data.result.posts,this.totalPages=e.data.page.totalPages}catch(e){console.error("태그로 게시글을 가져오는 중 오류 발생:",e)}},toggleTag(t){this.selectedTag===t?(this.selectedTag="",this.fetchPosts()):(this.selectedTag=t,this.fetchPostsByTag(t)),this.currentPage=0},nextPage(){this.currentPage<this.totalPages-1&&(this.currentPage++,this.updatePageQuery(),this.selectedTag?this.fetchPostsByTag(this.selectedTag):this.fetchPosts())},prevPage(){this.currentPage>0&&(this.currentPage--,this.updatePageQuery(),this.selectedTag?this.fetchPostsByTag(this.selectedTag):this.fetchPosts())},updatePageQuery(){this.$router.push({query:{page:this.currentPage}})}}};const W=(0,b.A)(H,[["render",x],["__scopeId","data-v-627fa2ff"]]);var B=W;const K={class:"post-detail"},R={class:"post-meta"},N={class:"meta-left"},G={class:"tags"},Y={class:"date-author"},Z={class:"createdAt"},tt={class:"writer"},et={class:"meta-right"},st=["src"],at=["innerHTML"];function ot(t,e,s,a,r,i){return(0,o.uX)(),(0,o.CE)("div",K,[(0,o.Lk)("h1",null,(0,n.v_)(r.post.title),1),(0,o.Lk)("div",R,[(0,o.Lk)("div",N,[(0,o.Lk)("div",G,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.post.tags,(t=>((0,o.uX)(),(0,o.CE)("span",{key:t,class:"tag-item"},(0,n.v_)(t),1)))),128))]),(0,o.Lk)("div",Y,[(0,o.Lk)("span",Z,(0,n.v_)(r.post.createdAt),1),(0,o.eW)(" · "),(0,o.Lk)("span",tt,(0,n.v_)(r.post.writer),1)])]),(0,o.Lk)("div",et,[i.canEdit?((0,o.uX)(),(0,o.CE)("button",{key:0,onClick:e[0]||(e[0]=(...t)=>i.editPost&&i.editPost(...t)),class:"edit-button"},"수정")):(0,o.Q3)("",!0),i.canDelete?((0,o.uX)(),(0,o.CE)("button",{key:1,onClick:e[1]||(e[1]=(...t)=>i.deletePost&&i.deletePost(...t)),class:"delete-button"},"삭제")):(0,o.Q3)("",!0)])]),(0,o.Lk)("img",{src:i.getThumbnailUrl(r.post.thumbnail),alt:"Post image",class:"post-image"},null,8,st),(0,o.Lk)("div",{class:"content",innerHTML:i.compiledMarkdown},null,8,at)])}var nt=s(4911),rt=s(1017),it=s.n(rt),lt=(s(4569),s(3206),{name:"PostDetail",props:{postId:{type:Number,required:!0}},data(){return{post:{},md:new nt.A({highlight:(t,e)=>{if(e&&it().languages[e])try{return`<pre class="language-${e}"><code>${it().highlight(t,it().languages[e],e)}</code></pre>`}catch(s){console.error("Prism.js highlighting error:",s)}return`<pre class="language-${e}"><code>${this.escapeHtml(t)}</code></pre>`},html:!0})}},computed:{compiledMarkdown(){return this.md.render(this.post.content||"")},canDelete(){const t=localStorage.getItem("userId");return this.post.writerId===Number(t)},canEdit(){const t=localStorage.getItem("userId");return this.post.writerId===Number(t)}},created(){this.fetchPostDetail()},methods:{escapeHtml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/ /g,"&quot;").replace(/'/g,"&#039;")},getThumbnailUrl(t){return t||s(3153)},async fetchPostDetail(){try{const t=await this.$axios.get(`/posts/${this.postId}`);this.post=t.data.result,console.log("Fetched Post:",this.post)}catch(t){console.error("Error fetching post detail:",t)}},async deletePost(){try{await this.$axios.delete(`/posts/${this.postId}`,{headers:{Authorization:`Bearer ${localStorage.getItem("accessToken")}`}}),window.location.href="/"}catch(t){console.error("게시글 삭제 중 오류가 발생했습니다:",t)}},editPost(){this.$router.push({name:"EditPost",params:{postId:this.postId}})}}});const ct=(0,b.A)(lt,[["render",ot],["__scopeId","data-v-ae2ddf96"]]);var ut=ct;const dt=t=>((0,o.Qi)("data-v-40f46ee6"),t=t(),(0,o.jt)(),t),pt={class:"join-container"},ht={class:"join-box"},gt=dt((()=>(0,o.Lk)("h1",null,"NAVER",-1))),mt={class:"input-group"},kt=dt((()=>(0,o.Lk)("label",{for:"email"},"이메일",-1))),vt={class:"input-group"},ft=dt((()=>(0,o.Lk)("label",{for:"password"},"비밀번호",-1))),bt={class:"input-group"},Lt=dt((()=>(0,o.Lk)("label",{for:"name"},"이름",-1))),yt=dt((()=>(0,o.Lk)("button",{type:"submit",class:"join-button"},"가입하기",-1))),Tt={class:"links"};function It(t,e,s,r,i,l){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",pt,[(0,o.Lk)("div",ht,[gt,(0,o.Lk)("form",{onSubmit:e[3]||(e[3]=(0,a.D$)(((...t)=>l.join&&l.join(...t)),["prevent"]))},[(0,o.Lk)("div",mt,[kt,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>i.email=t),required:""},null,512),[[a.Jo,i.email]])]),(0,o.Lk)("div",vt,[ft,(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t),required:""},null,512),[[a.Jo,i.password]])]),(0,o.Lk)("div",bt,[Lt,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":e[2]||(e[2]=t=>i.name=t),required:""},null,512),[[a.Jo,i.name]])]),yt],32),(0,o.Lk)("div",Tt,[(0,o.bF)(c,{to:"/login"},{default:(0,o.k6)((()=>[(0,o.eW)("로그인")])),_:1})]),(0,o.Lk)("p",null,(0,n.v_)(i.message),1)])])}var wt={name:"Join",data(){return{email:"",password:"",name:"",message:""}},methods:{async join(){try{await v.post("/users/join",{email:this.email,password:this.password,name:this.name});this.message="회원가입이 완료되었습니다.",window.location.href="/"}catch(t){this.message="회원가입 중 오류가 발생했습니다."}}}};const Pt=(0,b.A)(wt,[["render",It],["__scopeId","data-v-40f46ee6"]]);var Ct=Pt;const $t=t=>((0,o.Qi)("data-v-3045d89e"),t=t(),(0,o.jt)(),t),St={class:"login-container"},_t={class:"login-box"},Et=$t((()=>(0,o.Lk)("h1",null,"Tech Log",-1))),Ut={class:"input-group"},xt=$t((()=>(0,o.Lk)("label",{for:"email"},"이메일",-1))),Dt={class:"input-group"},jt=$t((()=>(0,o.Lk)("label",{for:"password"},"비밀번호",-1))),At={class:"options"},Xt=$t((()=>(0,o.Lk)("button",{type:"submit",class:"login-button"},"로그인",-1))),Ft={class:"links"};function Mt(t,e,s,r,i,l){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",St,[(0,o.Lk)("div",_t,[Et,(0,o.Lk)("form",{onSubmit:e[3]||(e[3]=(0,a.D$)(((...t)=>l.login&&l.login(...t)),["prevent"]))},[(0,o.Lk)("div",Ut,[xt,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"email","onUpdate:modelValue":e[0]||(e[0]=t=>i.email=t),required:""},null,512),[[a.Jo,i.email]])]),(0,o.Lk)("div",Dt,[jt,(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t),required:""},null,512),[[a.Jo,i.password]])]),(0,o.Lk)("div",At,[(0,o.Lk)("label",null,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=t=>i.rememberMe=t)},null,512),[[a.lH,i.rememberMe]]),(0,o.eW)(" 로그인 상태 유지")])]),Xt],32),(0,o.Lk)("div",Ft,[(0,o.bF)(c,{to:"/join"},{default:(0,o.k6)((()=>[(0,o.eW)("회원가입")])),_:1})]),(0,o.Lk)("p",null,(0,n.v_)(i.message),1)])])}var zt={name:"Login",data(){return{email:"",password:"",rememberMe:!1,message:""}},methods:{async login(){try{const t=await v.post("/users/login",{email:this.email,password:this.password}),{accessToken:e,refreshToken:s,name:a,userId:o}=t.data.result;localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",s),localStorage.setItem("name",a),localStorage.setItem("userId",o),this.message="로그인에 성공했습니다.",this.$router.push("/"),setTimeout((()=>{window.location.reload()}),100)}catch(t){this.message="로그인 중 오류가 발생했습니다."}}}};const Jt=(0,b.A)(zt,[["render",Mt],["__scopeId","data-v-3045d89e"]]);var Ot=Jt;const Qt=t=>((0,o.Qi)("data-v-13c65556"),t=t(),(0,o.jt)(),t),Vt={class:"write-container"},qt={class:"header"},Ht={class:"content-container"},Wt={class:"preview-section"},Bt=["innerHTML"],Kt={class:"thumbnail-upload"},Rt=Qt((()=>(0,o.Lk)("label",{for:"thumbnail"},"썸네일 이미지 업로드",-1))),Nt={key:0,class:"thumbnail-preview"},Gt=Qt((()=>(0,o.Lk)("p",null,"현재 이미지:",-1))),Yt=["src"],Zt={class:"tags-input"},te=Qt((()=>(0,o.Lk)("label",{for:"tags"},"태그 입력 (쉼표로 구분):",-1))),ee={class:"tags-preview"},se={class:"actions"};function ae(t,e,s,r,i,l){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Vt,[(0,o.Lk)("div",qt,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>i.title=t),placeholder:"제목을 입력하세요",class:"title-input"},null,512),[[a.Jo,i.title]])]),(0,o.Lk)("div",Ht,[(0,o.Lk)("div",{class:"editor-section",onDrop:e[2]||(e[2]=(0,a.D$)(((...t)=>l.handleDrop&&l.handleDrop(...t)),["prevent"])),onDragover:e[3]||(e[3]=(0,a.D$)((()=>{}),["prevent"]))},[(0,o.bo)((0,o.Lk)("textarea",{ref:"contentTextarea","onUpdate:modelValue":e[1]||(e[1]=t=>i.content=t),placeholder:"내용을 입력하세요",class:"content-textarea"},null,512),[[a.Jo,i.content]])],32),(0,o.Lk)("div",Wt,[(0,o.Lk)("div",{class:"content-preview",innerHTML:l.compiledMarkdown},null,8,Bt)])]),(0,o.Lk)("div",Kt,[Rt,(0,o.Lk)("input",{type:"file",onChange:e[4]||(e[4]=(...t)=>l.handleThumbnailUpload&&l.handleThumbnailUpload(...t)),id:"thumbnail",class:"file-input"},null,32),i.thumbnail?((0,o.uX)(),(0,o.CE)("div",Nt,[Gt,(0,o.Lk)("img",{src:i.thumbnail,alt:"Thumbnail preview",class:"thumbnail-image"},null,8,Yt)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Zt,[te,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>i.tagsInput=t),onInput:e[6]||(e[6]=(...t)=>l.updateTags&&l.updateTags(...t)),placeholder:"예: 영어, 자바, 구현"},null,544),[[a.Jo,i.tagsInput]]),(0,o.Lk)("div",ee,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.tags,((t,e)=>((0,o.uX)(),(0,o.CE)("span",{key:e,class:"tag-item"},(0,n.v_)(t.content),1)))),128))])]),(0,o.Lk)("div",se,[(0,o.bF)(c,{to:"/",onClick:(0,a.D$)(l.cancelPost,["prevent"]),class:"back-button"},{default:(0,o.k6)((()=>[(0,o.eW)("취소")])),_:1},8,["onClick"]),(0,o.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>l.savePost&&l.savePost(...t)),class:"save-button"},"출간하기")])])}var oe=s(357),ne={name:"Write",data(){return{title:"",content:"",thumbnail:"",previousThumbnail:"",tagsInput:"",tags:[],imageUrls:[]}},computed:{compiledMarkdown(){return(0,oe.xI)(this.content)}},methods:{updateTags(){this.tags=this.tagsInput.split(",").map((t=>({content:t.trim()})))},async handleThumbnailUpload(t){const e=t.target.files[0];if(!e)return;this.previousThumbnail&&await this.deletePreviousThumbnail();const s=new FormData;s.append("files",e);try{const t=await v.post("/images",s,{headers:{"Content-Type":"multipart/form-data"}});this.thumbnail=t.data.result.fileUrl,this.previousThumbnail=this.thumbnail,console.log("새로운 썸네일 URL:",this.thumbnail)}catch(a){console.error("이미지 업로드 중 오류가 발생했습니다:",a)}},async deletePreviousThumbnail(){try{await v.delete("/images",{params:{fileUrl:this.previousThumbnail}}),this.previousThumbnail=""}catch(t){console.error("이전 썸네일 삭제 중 오류가 발생했습니다:",t)}},async handleDrop(t){const e=t.dataTransfer.files[0];if(!e)return;const s=new FormData;s.append("files",e);try{const t=await v.post("/images",s,{headers:{"Content-Type":"multipart/form-data"}}),e=t.data.result.fileUrl;this.insertImageAtCursor(e),this.imageUrls.push(e)}catch(a){console.error("이미지 업로드 중 오류가 발생했습니다:",a)}},insertImageAtCursor(t){const e=this.$refs.contentTextarea,s=e.selectionStart,a=e.selectionEnd,o=this.content.substring(0,s),n=this.content.substring(a,this.content.length);this.content=`${o}<img src="${t}" alt="이미지" style="max-width: 100%; height: auto; display: block; margin: 0 auto;"/>\n${n}`},async cancelPost(){try{await Promise.all(this.imageUrls.map((t=>v.delete("/images",{params:{fileUrl:t}}))))}catch(t){console.error("이미지 삭제 중 오류가 발생했습니다:",t)}finally{this.$router.push("/")}},async savePost(){try{await v.post("/posts",{title:this.title,content:this.content,thumbnail:this.thumbnail,tags:this.tags,urls:this.imageUrls}),this.$router.push("/")}catch(t){console.error("게시글 작성 중 오류가 발생했습니다:",t)}}}};const re=(0,b.A)(ne,[["render",ae],["__scopeId","data-v-13c65556"]]);var ie=re;const le=t=>((0,o.Qi)("data-v-ea827628"),t=t(),(0,o.jt)(),t),ce={class:"edit-post-container"},ue={class:"header"},de={class:"content-container"},pe={class:"preview-section"},he=["innerHTML"],ge={class:"thumbnail-upload"},me=le((()=>(0,o.Lk)("label",{for:"thumbnail"},"썸네일 이미지 업로드",-1))),ke={key:0,class:"thumbnail-preview"},ve=le((()=>(0,o.Lk)("p",null,"현재 이미지:",-1))),fe=["src"],be={class:"tags-input"},Le=le((()=>(0,o.Lk)("label",{for:"tags"},"태그 입력 (쉼표로 구분):",-1))),ye={class:"tags-preview"},Te={class:"actions"};function Ie(t,e,s,r,i,l){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",ce,[(0,o.Lk)("div",ue,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>i.title=t),placeholder:"제목을 입력하세요",class:"title-input"},null,512),[[a.Jo,i.title]])]),(0,o.Lk)("div",de,[(0,o.Lk)("div",{class:"editor-section",onDrop:e[2]||(e[2]=(0,a.D$)(((...t)=>l.handleDrop&&l.handleDrop(...t)),["prevent"])),onDragover:e[3]||(e[3]=(0,a.D$)((()=>{}),["prevent"]))},[(0,o.bo)((0,o.Lk)("textarea",{ref:"contentTextarea","onUpdate:modelValue":e[1]||(e[1]=t=>i.content=t),placeholder:"내용을 입력하세요",class:"content-textarea"},null,512),[[a.Jo,i.content]])],32),(0,o.Lk)("div",pe,[(0,o.Lk)("div",{class:"content-preview",innerHTML:l.compiledMarkdown},null,8,he)])]),(0,o.Lk)("div",ge,[me,(0,o.Lk)("input",{type:"file",onChange:e[4]||(e[4]=(...t)=>l.handleImageUpload&&l.handleImageUpload(...t)),id:"thumbnail",class:"file-input"},null,32),i.thumbnail?((0,o.uX)(),(0,o.CE)("div",ke,[ve,(0,o.Lk)("img",{src:i.thumbnail,alt:"Thumbnail preview",class:"thumbnail-image"},null,8,fe)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",be,[Le,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>i.tagsInput=t),onInput:e[6]||(e[6]=(...t)=>l.updateTags&&l.updateTags(...t)),placeholder:"예: 자바, 스프링, 캐시"},null,544),[[a.Jo,i.tagsInput]]),(0,o.Lk)("div",ye,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.tags,((t,e)=>((0,o.uX)(),(0,o.CE)("span",{key:e,class:"tag-item"},(0,n.v_)(t.content),1)))),128))])]),(0,o.Lk)("div",Te,[(0,o.bF)(c,{to:"/",class:"back-button"},{default:(0,o.k6)((()=>[(0,o.eW)("취소")])),_:1}),(0,o.Lk)("button",{onClick:e[7]||(e[7]=(...t)=>l.updatePost&&l.updatePost(...t)),class:"save-button"},"수정 완료")])])}var we={name:"EditPost",data(){return{title:"",content:"",thumbnail:"",previousThumbnail:"",tagsInput:"",tags:[],postId:null,newUrls:[]}},computed:{compiledMarkdown(){return(0,oe.xI)(this.content)}},created(){this.postId=this.$route.params.postId,this.fetchPostDetails()},methods:{updateTags(){this.tags=this.tagsInput.split(",").map((t=>({content:t.trim()})))},async fetchPostDetails(){try{const t=await v.get(`/posts/${this.postId}`),{title:e,content:s,thumbnail:a,tags:o}=t.data.result;this.title=e,this.content=s,this.thumbnail=a,this.previousThumbnail=a,this.tags=o.map((t=>({content:t}))),this.tagsInput=o.join(", ")}catch(t){console.error("게시글 정보를 가져오는 중 오류가 발생했습니다:",t)}},async handleImageUpload(t){const e=t.target.files[0];if(!e)return;this.previousThumbnail&&await this.deletePreviousImage();const s=new FormData;s.append("files",e);try{const t=await v.post("/images",s,{headers:{"Content-Type":"multipart/form-data"}});this.thumbnail=t.data.result.fileUrl,console.log("새로운 썸네일 URL:",this.thumbnail)}catch(a){console.error("이미지 업로드 중 오류가 발생했습니다:",a)}},async deletePreviousImage(){try{await v.delete("/images",{params:{fileUrl:this.previousThumbnail}}),this.previousThumbnail=""}catch(t){console.error("이전 썸네일 삭제 중 오류가 발생했습니다:",t)}},async handleDrop(t){const e=t.dataTransfer.files[0];if(!e)return;const s=new FormData;s.append("files",e);try{const t=await v.post("/images",s,{headers:{"Content-Type":"multipart/form-data"}}),e=t.data.result.fileUrl;this.insertImageAtCursor(e),this.newUrls.push(e)}catch(a){console.error("이미지 업로드 중 오류가 발생했습니다:",a)}},insertImageAtCursor(t){const e=this.$refs.contentTextarea,s=e.selectionStart,a=e.selectionEnd,o=this.content.substring(0,s),n=this.content.substring(a,this.content.length);this.content=`${o}<img src="${t}" alt="이미지"/>\n${n}`},async updatePost(){try{await v.patch(`/posts/${this.postId}`,{title:this.title,content:this.content,thumbnail:this.thumbnail,tags:this.tags,newUrls:this.newUrls}),this.$router.push(`/post/${this.postId}`)}catch(t){console.error("게시글 수정 중 오류가 발생했습니다:",t)}}}};const Pe=(0,b.A)(we,[["render",Ie],["__scopeId","data-v-ea827628"]]);var Ce=Pe;const $e=[{path:"/",name:"MainPage",component:B},{path:"/post/:postId",name:"PostDetail",component:ut,props:!0},{path:"/join",name:"Join",component:Ct},{path:"/login",name:"Login",component:Ot},{path:"/write",name:"Write",component:ie},{path:"/edit/:postId",name:"EditPost",component:Ce,props:!0}],Se=(0,T.aE)({history:(0,T.LA)("https://AnTaeho.github.io/TechLog-client/"),routes:$e});var _e=Se;const Ee=(0,a.Ef)(y);Ee.config.globalProperties.$axios=v,Ee.use(_e),Ee.mount("#app")},3153:function(t,e,s){t.exports=s.p+"img/logo.680ea238.png"}},e={};function s(a){var o=e[a];if(void 0!==o)return o.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,a,o,n){if(!a){var r=1/0;for(u=0;u<t.length;u++){a=t[u][0],o=t[u][1],n=t[u][2];for(var i=!0,l=0;l<a.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(i=!1,n<r&&(r=n));if(i){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[a,o,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.p="https://AnTaeho.github.io/TechLog-client/"}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,n,r=a[0],i=a[1],l=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var u=l(s)}for(e&&e(a);c<r.length;c++)n=r[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},a=self["webpackChunktechlog_client"]=self["webpackChunktechlog_client"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(2295)}));a=s.O(a)})();
//# sourceMappingURL=app.ebd6a52e.js.map